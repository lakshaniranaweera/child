<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial; padding: 20px; }

    .section {
      display: none;
      margin-top: 15px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    .image-options img {
      width: 80px;
      margin: 5px;
      cursor: pointer;
      border: 3px solid transparent;
      transition: 0.3s;
    }

    .image-options img.selected {
      border-color: blue;
    }
  </style>
</head>
<body>

<form id="myForm">

    <label>Village Location</label>
    <select name="village" id="village" required>
      <option value="">Select</option>
      <option value="Piliyandala">Piliyandala</option>
      <option value="Nuwara Eliya">Nuwara Eliya</option>
      <option value="Galle">Galle</option>
      <option value="Anuradhapura">Anuradhapura</option>
      <option value="Monaragala">Monaragala</option>
      <option value="Jaffna">Jaffna</option>
    </select>

    <label>House Number</label>
    <input type="text" name="houseNumber" required>

    <label>Child Identification</label>
    <input type="text" name="childID" required>

    <label>Age</label>
    <input type="number" name="age" required>

    <label>Gender</label>
    <select id="gender" name="gender" required>
      <option value="">Select</option>
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>

    <!-- Male Section -->
    <div id="maleSection" class="section">
      <h3>Male Question</h3>
      <p>Choose one option:</p>
      <div class="image-options" id="maleOptions">
        <img src="https://via.placeholder.com/80?text=1" data-value="Option 1">
        <img src="https://via.placeholder.com/80?text=2" data-value="Option 2">
        <img src="https://via.placeholder.com/80?text=3" data-value="Option 3">
        <img src="https://via.placeholder.com/80?text=4" data-value="Option 4">
        <img src="https://via.placeholder.com/80?text=5" data-value="Option 5">
      </div>
    </div>

    <!-- Female Section -->
    <div id="femaleSection" class="section">
      <h3>Female Question</h3>
      <p>Choose one option:</p>
      <div class="image-options" id="femaleOptions">
        <img src="https://via.placeholder.com/80?text=A" data-value="Option A">
        <img src="https://via.placeholder.com/80?text=B" data-value="Option B">
        <img src="https://via.placeholder.com/80?text=C" data-value="Option C">
        <img src="https://via.placeholder.com/80?text=D" data-value="Option D">
        <img src="https://via.placeholder.com/80?text=E" data-value="Option E">
      </div>
    </div>

    <button type="submit">Submit</button>
</form>

<p id="result"></p>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzNuZtfqukXFrd4pMJfH_qIHrr7wX52efmT8LryDGGHTE5fRghRiahSwfDiohnmMAn0Xw/exec";

let selectedOption = "";

// Show sections based on gender
document.getElementById("gender").addEventListener("change", function () {
  let gender = this.value;

  document.getElementById("maleSection").style.display = gender === "male" ? "block" : "none";
  document.getElementById("femaleSection").style.display = gender === "female" ? "block" : "none";
  selectedOption = "";
});

// Handle image selection
document.querySelectorAll(".image-options img").forEach(img => {
  img.addEventListener("click", function () {

    document.querySelectorAll(".image-options img").forEach(i => i.classList.remove("selected"));

    this.classList.add("selected");

    selectedOption = this.getAttribute("data-value");
  });
});

// Submit to Google Sheet
document.getElementById("myForm").addEventListener("submit", function (e) {
  e.preventDefault();

  if (selectedOption === "") {
    alert("Please select an option image.");
    return;
  }

  let formData = {
    village: document.getElementById("village").value,
    houseNumber: this.houseNumber.value,
    childID: this.childID.value,
    age: this.age.value,
    gender: document.getElementById("gender").value,
    selectedOption: selectedOption
  };

  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(formData)
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("result").innerHTML = "✔ Data saved successfully!";
    this.reset();
    selectedOption = "";
  })
  .catch(err => {
    document.getElementById("result").innerHTML = "❌ Error submitting form!";
  });
});
</script>

</body>
</html>
